version: "3.8"

services:
<<<<<<< HEAD
    ollama:
        build: .
        container_name: ollama
        networks:
            - ollama-net
=======
  ollama:
    build: .
    container_name: ollama
    networks:
      - ollama-net
    volumes:
      - ollama:/root/.ollama
>>>>>>> cf4188c47712b4462926d0dbcd6c014a919ec4fa

    api:
        build: ./backend/.
        container_name: fastapi
        networks:
            - ollama-net
        depends_on:
            - ollama

    web:
        build: ./frontend/.
        container_name: webui
        networks:
            - ollama-net
        depends_on:
            - api
        ports:
            - "80:80"
        develop:
            watch:
                - action: sync
                  path: .
                  target: /app
                - action: rebuild
                  path: Dockerfile
                - action: rebuild
                  path: backend/Dockerfile
                - action: rebuild
                  path: backend/requirements.txt
                - action: rebuild
                  path: frontend/Dockerfile

networks:
    ollama-net:
        driver: bridge
volumes:
    ollama:
